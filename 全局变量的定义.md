# 如何定义全局变量

### C语言可以在不同的源文件中定义相同名字的全局变量吗？

关于全局变量的几点说明：

- 默认情况下，C语言中的全局变量和函数的作用域仅限于定义和声明这个函数或变量的内部，如果需要从这个`Cpp`文件之外访问这些函数或者全局变量就需要使用 `extern`关键字进行声明，这是因为C编译器是以C文件为单位进行编译的，如果这个C文件中引用了其他文件中定义的函数或者变量，编译器将无法找到这个函数或者变量的定义，从而给出该函数或者变量未定义的错误信息。


- `static`关键字用于全局变量的声明时，作用类似于函数的情况，这个**全局变量的作用域将局限在声明该变量的c文件内部**，这个`Cpp`文件之外的代码将无法访问这个变量。编译的时候将会出现类似`undeference to "xxx"`的报错，它是找不到`xxx`的，**因为使用`static`相当于进行了文件隔离**。

### 能不能在头文件中定义全局变量？

- 因为变量只能被定义一次，包含了头文件的源文件，都将会定义同样的全局变量，造成冲突，所以，头文件中不能定义全局变量。
- 如果在头文件中声明全局变量，那么所有引用该头文件的文件都将为此变量非配内存，这样降低了内存的利用率。

### 解决方法

步骤1：在Cpp文件中定义 int a;
步骤2：在想共享a的文件中添加 extern int a;

通过以上两个步骤就可以完成多文件的全局变量共享。

-假设工程中的多个`Cpp`文件需要这个全局变量，那么你就任找一个源文件，把这个全局变量定义到这个源文件中，然后新建一个`.h`文件，在里面进行`extern` 这个变量的声明，最后在需要使用这个全局变量的源文件中include你新建的`.h`文件就好了。
